@* Usamos el mismo maquetado que el de la API para mantener consistencia visual *@

@if (TotalElementos > 0)
{
    <div class="pagination-container">
        <div class="pagination-info">
            Página @PaginaActual de @TotalPaginas — Total: @TotalElementos registros
        </div>

        <div class="pagination-buttons">
            <button type="button" 
                    class="pag-btn"
                    disabled="@(!CanGoPrev)"
                    @onclick="() => CambiarPagina(1)">
                <i class="fas fa-angle-double-left"></i> ⏮
            </button>

            <button type="button" 
                    class="pag-btn"
                    disabled="@(!CanGoPrev)"
                    @onclick="() => CambiarPagina(PaginaActual - 1)">
                <i class="fas fa-angle-left"></i> ◀
            </button>

            <span class="pag-text">
                @PaginaActual / @TotalPaginas
            </span>

            <button type="button" 
                    class="pag-btn"
                    disabled="@(!CanGoNext)"
                    @onclick="() => CambiarPagina(PaginaActual + 1)">
                <i class="fas fa-angle-right"></i> ▶
            </button>

            <button type="button" 
                    class="pag-btn"
                    disabled="@(!CanGoNext)"
                    @onclick="() => CambiarPagina(TotalPaginas)">
                <i class="fas fa-angle-double-right"></i> ⏭
            </button>
        </div>
    </div>
}

@code {
    [Parameter] public int PaginaActual { get; set; } = 1;
    [Parameter] public int TotalPaginas { get; set; } = 1;
    [Parameter] public int TotalElementos { get; set; } = 0;
    [Parameter] public int ElementosPorPagina { get; set; } = 5;

    [Parameter] public EventCallback<int> OnPageChange { get; set; }

    bool CanGoPrev => PaginaActual > 1;
    bool CanGoNext => PaginaActual < TotalPaginas;

    private async Task CambiarPagina(int nuevaPagina)
    {
        // Validamos que no se salga de los rangos antes de avisar al padre
        if (nuevaPagina >= 1 && nuevaPagina <= TotalPaginas && nuevaPagina != PaginaActual)
        {
            await OnPageChange.InvokeAsync(nuevaPagina);
        }
    }
}